<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DPR Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Custom Palette */
        .text-colgate-blue { color: #0072CE; }
        .bg-colgate-blue-light { background-color: rgba(0, 114, 206, 0.1); }
        .border-colgate-blue-light { border-color: rgba(0, 114, 206, 0.2); }
        
        .text-colgate-green { color: #5BC286; }
        .bg-colgate-green-light { background-color: rgba(91, 194, 134, 0.15); }
        .border-colgate-green-light { border-color: rgba(91, 194, 134, 0.2); }

        .text-colgate-navy { color: #001540; }
        .bg-colgate-navy-light { background-color: rgba(0, 21, 64, 0.08); }
        .border-colgate-navy-light { border-color: rgba(0, 21, 64, 0.15); }

        .text-colgate-beige-dark { color: #8B5E3C; } 
        .bg-colgate-beige { background-color: #E8D5C4; } 
        .bg-colgate-beige-light { background-color: rgba(232, 213, 196, 0.4); }
        .border-colgate-beige { border-color: #D6C0AD; }

        .text-colgate-red { color: #E31837; }
        .bg-colgate-red-light { background-color: #FFF0F2; }
        .border-colgate-red { border-color: #FFCDD2; }
        /* Added Solid Colgate Red Background */
        .bg-colgate-red { background-color: #E31837; }

        /* Solid Header Backgrounds */
        .header-bg-blue { background-color: #E1F0FA; }    
        .header-bg-green { background-color: #E3F6EB; }   
        .header-bg-navy { background-color: #E6E8ED; }    
        .header-bg-beige { background-color: #F5EBE0; }   

        /* Sparkle Pattern Classes */
        .header-pattern {
            position: absolute;
            z-index: 0;
            pointer-events: none;
            opacity: 0.4;
        }

        @keyframes slow-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
            animation: slow-spin 60s linear infinite;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Navbar (Updated to Colgate Red) -->
    <nav class="bg-colgate-red border-b border-red-700 sticky top-0 z-30 overflow-hidden shadow-md">
        
        <!-- Big Sparkle Background (Adjusted for Red BG) -->
        <div class="absolute top-[-50%] right-[-5%] w-[500px] h-[500px] pointer-events-none z-0 opacity-10 text-white">
            <svg viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="0.5" class="w-full h-full animate-spin-slow">
                <line x1="50" y1="50" x2="50" y2="0" /><line x1="50" y1="50" x2="60" y2="0" /><line x1="50" y1="50" x2="70" y2="5" /><line x1="50" y1="50" x2="80" y2="10" /><line x1="50" y1="50" x2="90" y2="20" /><line x1="50" y1="50" x2="100" y2="30" /><line x1="50" y1="50" x2="100" y2="50" /><line x1="50" y1="50" x2="100" y2="70" /><line x1="50" y1="50" x2="90" y2="80" /><line x1="50" y1="50" x2="80" y2="90" /><line x1="50" y1="50" x2="70" y2="95" /><line x1="50" y1="50" x2="60" y2="100" /><line x1="50" y1="50" x2="50" y2="100" /><line x1="50" y1="50" x2="40" y2="100" /><line x1="50" y1="50" x2="30" y2="95" /><line x1="50" y1="50" x2="20" y2="90" /><line x1="50" y1="50" x2="10" y2="80" /><line x1="50" y1="50" x2="0" y2="70" /><line x1="50" y1="50" x2="0" y2="50" /><line x1="50" y1="50" x2="0" y2="30" /><line x1="50" y1="50" x2="10" y2="20" /><line x1="50" y1="50" x2="20" y2="10" /><line x1="50" y1="50" x2="30" y2="5" /><line x1="50" y1="50" x2="40" y2="0" />
            </svg>
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex justify-between h-16">
                <div class="flex flex-col justify-center">
                    <!-- Text colors updated to White -->
                    <span class="text-xl font-semibold tracking-tight text-white">DPR Dashboard</span>
                    <span class="text-xs text-white/80">Report Update: Till 30th Nov</span>
                </div>
                <div class="flex items-center space-x-6">
                    <!-- View Toggle Switch (Container bg updated for contrast) -->
                    <div class="bg-red-800/30 p-1 rounded-lg flex items-center shadow-inner border border-red-700/50">
                        <button id="btnGT" onclick="toggleView('GT')" class="px-4 py-1.5 rounded-md text-sm font-medium transition-all shadow-sm bg-white text-colgate-navy border border-slate-200">
                            GT Business
                        </button>
                        <button id="btnMT" onclick="toggleView('MT')" class="px-4 py-1.5 rounded-md text-sm font-medium transition-all text-white/70 hover:text-white hover:bg-white/10">
                            MT & Others
                        </button>
                    </div>

                    <div class="relative group">
                        <div class="absolute inset-0 bg-white/20 backdrop-blur-sm rounded-lg -z-10"></div>
                        <input type="text" id="searchInput" placeholder="Search Area..." 
                            class="w-64 pl-10 pr-4 py-2 border border-white/20 rounded-lg text-sm text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all bg-white/10">
                        <svg class="w-4 h-4 text-white/70 absolute left-3 top-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Stats Section: Time Table & Total Achievements -->
        <div class="flex flex-col gap-6 mb-6">
            
            <!-- 1. Time Status (One Little Table Centered) -->
            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-5 mx-auto w-full max-w-2xl relative overflow-hidden">
                <!-- Decorative Sparkle for Month Status -->
                <svg class="absolute -top-10 -left-10 w-40 h-40 text-slate-50 z-0 pointer-events-none" viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="1">
                    <circle cx="50" cy="50" r="40" />
                    <circle cx="50" cy="50" r="30" />
                    <circle cx="50" cy="50" r="20" />
                </svg>
                <svg class="absolute -bottom-10 -right-10 w-40 h-40 text-slate-50 z-0 pointer-events-none" viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="1">
                    <line x1="50" y1="0" x2="50" y2="100" />
                    <line x1="0" y1="50" x2="100" y2="50" />
                    <line x1="15" y1="15" x2="85" y2="85" />
                    <line x1="85" y1="15" x2="15" y2="85" />
                </svg>

                <h3 class="text-sm font-bold text-slate-500 uppercase tracking-widest mb-4 border-b border-slate-100 pb-2 text-center relative z-10">Month Status</h3>
                <div class="flex justify-between items-center text-sm text-left px-4 relative z-10">
                    <div class="flex flex-col items-center group cursor-default">
                        <span class="text-slate-500 font-medium mb-1">Total Days</span>
                        <span class="text-xl font-bold text-colgate-navy">26</span>
                    </div>
                    <div class="h-8 w-px bg-slate-200"></div>
                    <div class="flex flex-col items-center group cursor-default">
                        <span class="text-slate-500 font-medium mb-1">Days Passed</span>
                        <span class="text-xl font-bold text-colgate-green">26</span>
                    </div>
                    <div class="h-8 w-px bg-slate-200"></div>
                    <div class="flex flex-col items-center group cursor-default">
                        <span class="text-slate-500 font-medium mb-1">Remaining</span>
                        <span class="text-xl font-bold text-colgate-red">0</span>
                    </div>
                    <div class="h-8 w-px bg-slate-200"></div>
                    <div class="flex flex-col items-center group cursor-default">
                        <span class="text-slate-500 font-medium mb-1">Time Gone</span>
                        <span class="text-xl font-bold text-colgate-beige-dark">100%</span>
                    </div>
                </div>
            </div>

            <!-- 2. Total Achievements Overview (One Line, Separate Cards) -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <!-- PRI KPI -->
                <div class="p-4 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center items-center text-center group hover:border-blue-300 transition-all relative overflow-hidden">
                    <!-- Sparkle -->
                    <svg class="absolute -top-2 -right-2 w-16 h-16 text-blue-100 opacity-50 group-hover:scale-110 transition-transform pointer-events-none" viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="100" y1="0" x2="0" y2="100" /><line x1="100" y1="0" x2="20" y2="80" /><line x1="100" y1="0" x2="40" y2="60" /><line x1="100" y1="0" x2="0" y2="50" /><line x1="100" y1="0" x2="0" y2="20" />
                    </svg>
                    
                    <div class="bg-blue-50 p-2 rounded-full mb-3 relative z-10"><span class="text-colgate-blue text-xs font-bold">PRI</span></div>
                    
                    <div class="relative z-10 w-full flex flex-col gap-2">
                        <div>
                            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Target</p>
                            <p class="text-lg font-bold text-slate-600" id="totalPriTgt">0</p>
                        </div>
                        <div class="h-px bg-slate-100 w-1/2 mx-auto"></div>
                        <div>
                            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Achievement</p>
                            <p class="text-2xl font-bold text-colgate-blue" id="totalPriAch">0</p>
                        </div>
                    </div>
                </div>

                <!-- STT KPI -->
                <div class="p-4 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center items-center text-center group hover:border-green-300 transition-all relative overflow-hidden">
                    <!-- Sparkle -->
                    <svg class="absolute -top-4 -left-4 w-20 h-20 text-emerald-100 opacity-50 group-hover:scale-110 transition-transform pointer-events-none" viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="0" cy="0" r="20" /><circle cx="0" cy="0" r="40" /><circle cx="0" cy="0" r="60" /><circle cx="0" cy="0" r="80" />
                    </svg>

                    <div class="bg-emerald-50 p-2 rounded-full mb-3 relative z-10"><span class="text-colgate-green text-xs font-bold">STT</span></div>
                    
                    <div class="relative z-10 w-full flex flex-col gap-2">
                        <div>
                            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Target</p>
                            <p class="text-lg font-bold text-slate-600" id="totalSttTgt">0</p>
                        </div>
                        <div class="h-px bg-slate-100 w-1/2 mx-auto"></div>
                        <div>
                            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Achievement</p>
                            <p class="text-2xl font-bold text-colgate-green" id="totalSttAch">0</p>
                        </div>
                    </div>
                </div>

                <!-- TBR KPI -->
                <div class="p-4 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center items-center text-center group hover:border-slate-400 transition-all relative overflow-hidden">
                    <!-- Sparkle -->
                    <svg class="absolute -bottom-2 -right-2 w-14 h-14 text-slate-200 opacity-50 group-hover:scale-110 transition-transform pointer-events-none" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z" />
                    </svg>

                    <div class="bg-slate-100 p-2 rounded-full mb-3 relative z-10"><span class="text-colgate-navy text-xs font-bold">TBR</span></div>
                    
                    <div class="relative z-10 w-full flex flex-col gap-2">
                        <div>
                            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Target</p>
                            <p class="text-lg font-bold text-slate-600" id="totalTbrTgt">0</p>
                        </div>
                        <div class="h-px bg-slate-100 w-1/2 mx-auto"></div>
                        <div>
                            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Achievement</p>
                            <p class="text-2xl font-bold text-colgate-navy" id="totalTbrAch">0</p>
                        </div>
                    </div>
                </div>

                <!-- ERC KPI -->
                <div class="p-4 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center items-center text-center group hover:border-orange-300 transition-all relative overflow-hidden">
                    <!-- Sparkle -->
                    <svg class="absolute -top-4 left-1/2 transform -translate-x-1/2 w-24 h-24 text-orange-100 opacity-50 group-hover:scale-110 transition-transform pointer-events-none" viewBox="0 0 100 50" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="50" y1="0" x2="50" y2="50" /><line x1="50" y1="0" x2="30" y2="40" /><line x1="50" y1="0" x2="70" y2="40" /><line x1="50" y1="0" x2="10" y2="20" /><line x1="50" y1="0" x2="90" y2="20" />
                    </svg>

                    <div class="bg-orange-50 p-2 rounded-full mb-3 relative z-10"><span class="text-colgate-beige-dark text-xs font-bold">ERC</span></div>
                    
                    <div class="relative z-10 w-full flex flex-col gap-2">
                        <div>
                            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Target</p>
                            <p class="text-lg font-bold text-slate-600" id="totalErcTgt">0</p>
                        </div>
                        <div class="h-px bg-slate-100 w-1/2 mx-auto"></div>
                        <div>
                            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider">Achievement</p>
                            <p class="text-2xl font-bold text-colgate-beige-dark" id="totalErcAch">0</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Table Section -->
        <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-slate-200" id="dataTable">
                    <thead class="bg-slate-50">
                        <tr>
                            <th scope="col" class="sticky left-0 z-10 bg-slate-50 px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]">Area</th>
                            
                            <!-- Primary Group -->
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-blue uppercase border-l border-slate-100 header-bg-blue">
                                <span class="relative z-10">Pri Tgt</span>
                                <svg class="header-pattern top-[-10px] right-[-10px] w-12 h-12 text-blue-400" viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="100" y1="0" x2="0" y2="100" /><line x1="100" y1="0" x2="20" y2="80" /><line x1="100" y1="0" x2="40" y2="60" /><line x1="100" y1="0" x2="0" y2="50" /><line x1="100" y1="0" x2="0" y2="20" />
                                </svg>
                            </th>
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-blue uppercase header-bg-blue"><span class="relative z-10">Pri Ach</span></th>
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-blue uppercase w-32 header-bg-blue"><span class="relative z-10">Pri Ach %</span></th>
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-blue uppercase header-bg-blue"><span class="relative z-10">LE</span></th>

                            <!-- STT Group -->
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-green uppercase border-l border-slate-100 header-bg-green">
                                <span class="relative z-10">STT Tgt</span>
                                <svg class="header-pattern top-[-15px] left-[-15px] w-16 h-16 text-emerald-400" viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="0" cy="0" r="20" /><circle cx="0" cy="0" r="40" /><circle cx="0" cy="0" r="60" /><circle cx="0" cy="0" r="80" />
                                </svg>
                            </th>
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-green uppercase header-bg-green"><span class="relative z-10">STT Ach</span></th>
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-green uppercase w-32 header-bg-green"><span class="relative z-10">STT Ach %</span></th>
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-green uppercase header-bg-green"><span class="relative z-10">LE</span></th>

                            <!-- TBR Group -->
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-navy uppercase border-l border-slate-100 header-bg-navy">
                                <span class="relative z-10">TBR Tgt</span>
                                <svg class="header-pattern bottom-[-5px] right-[-5px] w-10 h-10 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z" />
                                </svg>
                            </th>
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-navy uppercase header-bg-navy"><span class="relative z-10">TBR Ach</span></th>
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-navy uppercase w-24 header-bg-navy"><span class="relative z-10">TBR %</span></th>

                            <!-- ERC Group -->
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-beige-dark uppercase border-l border-slate-100 header-bg-beige">
                                <span class="relative z-10">ERC Tgt</span>
                                <svg class="header-pattern top-[-20px] left-[50%] transform translate-x-[-50%] w-20 h-20 text-orange-300" viewBox="0 0 100 50" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="50" y1="0" x2="50" y2="50" /><line x1="50" y1="0" x2="30" y2="40" /><line x1="50" y1="0" x2="70" y2="40" /><line x1="50" y1="0" x2="10" y2="20" /><line x1="50" y1="0" x2="90" y2="20" />
                                </svg>
                            </th>
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-beige-dark uppercase header-bg-beige"><span class="relative z-10">ERC Ach</span></th>
                            <th class="relative overflow-hidden px-3 py-3 text-center text-xs font-bold text-colgate-beige-dark uppercase w-32 header-bg-beige"><span class="relative z-10">ERC %</span></th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-slate-200 text-sm" id="tableBody">
                        <!-- Rows will be populated by JS -->
                    </tbody>
                </table>
            </div>
        </div>
        
    </main>

    <script>
        // Data Parsing
        const rawData = [
            { area: "GP Dhaka North", pTgt: 58.58, pAch: 56.15, pPct: 96, sTgt: 58.58, sAch: 58.30, sPct: 100, tTgt: 1.06, tAch: 0.43, tPct: 41, eTgt: 8057, eAch: 8197, ePct: 102, type: "GT" },
            { area: "GP Dhaka West", pTgt: 46.52, pAch: 37.48, pPct: 81, sTgt: 46.52, sAch: 36.74, sPct: 79, tTgt: 0.84, tAch: 0.03, tPct: 3, eTgt: 5909, eAch: 4431, ePct: 75, type: "GT" },
            { area: "GP Mymensingh", pTgt: 76.92, pAch: 47.50, pPct: 62, sTgt: 76.92, sAch: 51.00, sPct: 66, tTgt: 1.39, tAch: 0.48, tPct: 34, eTgt: 12104, eAch: 8185, ePct: 68, type: "GT" },
            { area: "GP Rangpur", pTgt: 54.21, pAch: 29.68, pPct: 55, sTgt: 54.21, sAch: 36.07, sPct: 67, tTgt: 0.98, tAch: 0.22, tPct: 23, eTgt: 8675, eAch: 6551, ePct: 76, type: "GT" },
            { area: "GP Bogura", pTgt: 88.18, pAch: 75.88, pPct: 86, sTgt: 88.18, sAch: 74.45, sPct: 84, tTgt: 1.60, tAch: 0.22, tPct: 14, eTgt: 15634, eAch: 13680, ePct: 88, type: "GT" },
            { area: "GP Sylhet", pTgt: 43.02, pAch: 34.82, pPct: 81, sTgt: 43.02, sAch: 30.99, sPct: 72, tTgt: 0.78, tAch: 0.55, tPct: 70, eTgt: 7218, eAch: 4969, ePct: 69, type: "GT" },
            { area: "GP North", pTgt: 367.42, pAch: 281.50, pPct: 77, sTgt: 367.42, sAch: 287.55, sPct: 78, tTgt: 6.66, tAch: 1.93, tPct: 29, eTgt: 57597, eAch: 46013, ePct: 80, type: "GT" },
            { area: "GP Dhaka East", pTgt: 65.81, pAch: 59.55, pPct: 90, sTgt: 65.81, sAch: 53.25, sPct: 81, tTgt: 1.19, tAch: 0.09, tPct: 7, eTgt: 8155, eAch: 6800, ePct: 83, type: "GT" },
            { area: "GP Chattogram", pTgt: 36.07, pAch: 22.74, pPct: 63, sTgt: 36.07, sAch: 22.31, sPct: 62, tTgt: 0.65, tAch: 0.11, tPct: 17, eTgt: 6579, eAch: 4195, ePct: 64, type: "GT" },
            { area: "GP Cumilla", pTgt: 50.41, pAch: 38.34, pPct: 76, sTgt: 50.41, sAch: 38.49, sPct: 76, tTgt: 0.91, tAch: 0.00, tPct: 0, eTgt: 9466, eAch: 6780, ePct: 72, type: "GT" },
            { area: "GP Faridpur", pTgt: 51.35, pAch: 52.36, pPct: 102, sTgt: 51.35, sAch: 51.08, sPct: 99, tTgt: 0.93, tAch: 0.00, tPct: 0, eTgt: 7347, eAch: 6263, ePct: 85, type: "GT" },
            { area: "GP Barishal", pTgt: 47.18, pAch: 28.80, pPct: 61, sTgt: 47.18, sAch: 26.29, sPct: 56, tTgt: 0.85, tAch: 0.18, tPct: 21, eTgt: 9130, eAch: 5759, ePct: 63, type: "GT" },
            { area: "GP Jashore", pTgt: 51.77, pAch: 43.43, pPct: 84, sTgt: 51.77, sAch: 41.79, sPct: 81, tTgt: 0.94, tAch: 0.00, tPct: 0, eTgt: 8533, eAch: 6079, ePct: 71, type: "GT" },
            { area: "GP South", pTgt: 302.59, pAch: 245.22, pPct: 81, sTgt: 302.59, sAch: 233.21, sPct: 77, tTgt: 5.48, tAch: 0.38, tPct: 7, eTgt: 49210, eAch: 35876, ePct: 73, type: "GT" },
            { area: "GP Total", pTgt: 670.01, pAch: 526.72, pPct: 79, sTgt: 670.01, sAch: 520.75, sPct: 78, tTgt: 12.14, tAch: 2.31, tPct: 19, eTgt: 106807, eAch: 81889, ePct: 77, type: "GT" },
            { area: "Dhaka East", pTgt: 66.00, pAch: 14.08, pPct: 21, sTgt: 73.00, sAch: 50.47, sPct: 69, tTgt: 4.95, tAch: 0.80, tPct: 16, eTgt: 4000, eAch: 4127, ePct: 103, type: "GT" },
            { area: "Dhaka North", pTgt: 58.00, pAch: 43.53, pPct: 75, sTgt: 77.62, sAch: 59.19, sPct: 76, tTgt: 4.35, tAch: 0.69, tPct: 16, eTgt: 4400, eAch: 3288, ePct: 75, type: "GT" },
            { area: "Dhaka South", pTgt: 27.00, pAch: 10.38, pPct: 38, sTgt: 27.00, sAch: 18.22, sPct: 67, tTgt: 2.03, tAch: 0.25, tPct: 12, eTgt: 1900, eAch: 1695, ePct: 89, type: "GT" },
            { area: "Dhaka West", pTgt: 79.00, pAch: 44.03, pPct: 56, sTgt: 81.67, sAch: 47.14, sPct: 58, tTgt: 5.93, tAch: 0.26, tPct: 4, eTgt: 3640, eAch: 3589, ePct: 99, type: "GT" },
            { area: "GTM Dhaka", pTgt: 230.00, pAch: 112.02, pPct: 49, sTgt: 259.29, sAch: 175.02, sPct: 67, tTgt: 17.26, tAch: 2.00, tPct: 12, eTgt: 13940, eAch: 12699, ePct: 91, type: "GT" },
            { area: "CTG North", pTgt: 31.50, pAch: 19.58, pPct: 62, sTgt: 31.50, sAch: 19.38, sPct: 62, tTgt: 4.01, tAch: 0.11, tPct: 3, eTgt: 2737, eAch: 2063, ePct: 75, type: "GT" },
            { area: "CTG South", pTgt: 38.50, pAch: 31.94, pPct: 83, sTgt: 38.50, sAch: 30.60, sPct: 79, tTgt: 4.61, tAch: 0.67, tPct: 15, eTgt: 2590, eAch: 2681, ePct: 104, type: "GT" },
            { area: "GTM CTG", pTgt: 70.00, pAch: 51.52, pPct: 74, sTgt: 70.00, sAch: 49.98, sPct: 71, tTgt: 8.62, tAch: 0.79, tPct: 9, eTgt: 5327, eAch: 4744, ePct: 89, type: "GT" },
            { area: "Total GTM", pTgt: 300.00, pAch: 163.54, pPct: 55, sTgt: 329.29, sAch: 225.00, sPct: 68, tTgt: 25.88, tAch: 2.78, tPct: 11, eTgt: 19267, eAch: 17443, ePct: 91, type: "GT" },
            { area: "Retail Total", pTgt: 970.01, pAch: 690.26, pPct: 71, sTgt: 999.30, sAch: 745.75, sPct: 75, tTgt: 38.02, tAch: 5.09, tPct: 13, eTgt: 126074, eAch: 99332, ePct: 79, type: "GT" },
            
            { area: "Key Accounts", pTgt: 180.30, pAch: 143.14, pPct: 79, sTgt: 180.30, sAch: 143.14, sPct: 79, tTgt: 21.70, tAch: 20.26, tPct: 93, eTgt: 0, eAch: 0, ePct: 0, type: "MT" },
            { area: "E-Commerce", pTgt: 17.80, pAch: 8.37, pPct: 47, sTgt: 17.80, sAch: 8.37, sPct: 47, tTgt: 2.64, tAch: 0.64, tPct: 24, eTgt: 0, eAch: 0, ePct: 0, type: "MT" },
            { area: "Institution", pTgt: 32.00, pAch: 80.78, pPct: 252, sTgt: 32.00, sAch: 80.78, sPct: 252, tTgt: 0.00, tAch: 0.23, tPct: 0, eTgt: 0, eAch: 0, ePct: 0, type: "MT" },
            { area: "MT+E Com+Inst", pTgt: 230.10, pAch: 232.29, pPct: 101, sTgt: 230.10, sAch: 232.29, sPct: 101, tTgt: 24.34, tAch: 21.13, tPct: 87, eTgt: 0, eAch: 0, ePct: 0, type: "MT" },
            
            { area: "TOTAL", pTgt: 1200.12, pAch: 922.55, pPct: 77, sTgt: 1229.41, sAch: 978.04, sPct: 80, tTgt: 62.36, tAch: 26.22, tPct: 42, eTgt: 126074, eAch: 99332, ePct: 79, type: "ALL" }
        ];

        // --- View Filtering ---
        let currentView = 'GT';

        function toggleView(view) {
            currentView = view;
            
            const btnGT = document.getElementById('btnGT');
            const btnMT = document.getElementById('btnMT');

            // Updated styling logic for Red Header
            if (view === 'GT') {
                btnGT.className = "px-4 py-1.5 rounded-md text-sm font-medium transition-all shadow-sm bg-white text-colgate-navy border border-slate-200";
                btnMT.className = "px-4 py-1.5 rounded-md text-sm font-medium transition-all text-white/70 hover:text-white hover:bg-white/10";
            } else {
                btnMT.className = "px-4 py-1.5 rounded-md text-sm font-medium transition-all shadow-sm bg-white text-colgate-navy border border-slate-200";
                btnGT.className = "px-4 py-1.5 rounded-md text-sm font-medium transition-all text-white/70 hover:text-white hover:bg-white/10";
            }

            filterAndRender();
        }

        function filterAndRender() {
            const searchTerm = searchInput.value.toLowerCase();
            
            const filtered = rawData.filter(row => {
                let typeMatch = false;
                
                // Modified logic: Exclude GRAND TOTAL (type: 'ALL') from GT view
                if (currentView === 'GT') {
                    typeMatch = row.type === 'GT';
                } else {
                    typeMatch = row.type === currentView || row.type === 'ALL';
                }

                const searchMatch = row.area.toLowerCase().includes(searchTerm);
                return typeMatch && searchMatch;
            });

            renderTable(filtered);
        }

        // --- Render Table ---
        const tableBody = document.getElementById('tableBody');
        const searchInput = document.getElementById('searchInput');

        function getProgressColor(val) {
            if (val >= 80) return 'text-emerald-600 font-bold';
            if (val >= 50) return 'text-amber-600 font-medium';
            return 'text-red-600 font-medium';
        }

        // Standard formatter (for ERC, TBR etc - adapts to data)
        function formatNum(num) {
            return new Intl.NumberFormat('en-US', { maximumFractionDigits: 2 }).format(num);
        }

        // Specific formatter for PRI & STT (Strict 2 Fractions)
        function formatFraction(num) {
            return new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(num);
        }

        function renderTable(data) {
            tableBody.innerHTML = '';
            
            const daysPassed = 26;
            const remainingDays = 0;
            const factor = 1.5;

            data.forEach(row => {
                let rowClass = 'hover:bg-slate-50 text-slate-600';
                let stickyClass = 'bg-white'; 
                let isMajorTotal = false;
                
                if (row.area === 'Retail Total' || row.area === 'MT+E Com+Inst') {
                    rowClass = 'bg-colgate-red-light font-bold text-colgate-red border-y border-colgate-red';
                    stickyClass = 'bg-colgate-red-light';
                    isMajorTotal = true;
                } 
                else if (row.area.includes('Total') || row.area === 'TOTAL' || row.area === 'GP North' || row.area === 'GP South' || row.area === 'GTM Dhaka' || row.area === 'GTM CTG') {
                    rowClass = 'bg-slate-100 font-bold text-slate-800';
                    stickyClass = 'bg-slate-100';
                }

                // LE Calculations - Removed Math.round to allow fractions
                const pLe = row.pAch + ((row.pAch / daysPassed) * factor * remainingDays);
                const sLe = row.sAch + ((row.sAch / daysPassed) * factor * remainingDays);

                const tr = document.createElement('tr');
                tr.className = `transition-colors duration-150 ${rowClass}`;
                
                tr.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap sticky left-0 z-10 ${stickyClass} border-r border-slate-200 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]">
                        ${row.area}
                    </td>
                    
                    <!-- Primary Group (Uses formatFraction) -->
                    <td class="px-3 py-4 text-center border-l-4 border-slate-100 bg-colgate-blue-light text-slate-700 ${isMajorTotal ? 'text-colgate-red' : ''}">${formatFraction(row.pTgt)}</td>
                    <td class="px-3 py-4 text-center bg-colgate-blue-light text-slate-900 ${isMajorTotal ? 'text-colgate-red' : ''}">${formatFraction(row.pAch)}</td>
                    <td class="px-3 py-4 bg-colgate-blue-light text-center"><span class="${getProgressColor(row.pPct)}">${row.pPct}%</span></td>
                    <td class="px-3 py-4 text-center bg-colgate-blue-light text-slate-900 font-semibold ${isMajorTotal ? 'text-colgate-red' : ''}">${formatFraction(pLe)}</td>

                    <!-- STT Group (Uses formatFraction) -->
                    <td class="px-3 py-4 text-center border-l-4 border-slate-100 bg-colgate-green-light text-slate-700 ${isMajorTotal ? 'text-colgate-red' : ''}">${formatFraction(row.sTgt)}</td>
                    <td class="px-3 py-4 text-center bg-colgate-green-light text-slate-900 ${isMajorTotal ? 'text-colgate-red' : ''}">${formatFraction(row.sAch)}</td>
                    <td class="px-3 py-4 bg-colgate-green-light text-center"><span class="${getProgressColor(row.sPct)}">${row.sPct}%</span></td>
                    <td class="px-3 py-4 text-center bg-colgate-green-light text-slate-900 font-semibold ${isMajorTotal ? 'text-colgate-red' : ''}">${formatFraction(sLe)}</td>

                    <!-- TBR Group (Now uses formatFraction) -->
                    <td class="px-3 py-4 text-center border-l-4 border-slate-100 bg-colgate-navy-light text-slate-700 ${isMajorTotal ? 'text-colgate-red' : ''}">${formatFraction(row.tTgt)}</td>
                    <td class="px-3 py-4 text-center bg-colgate-navy-light text-slate-900 ${isMajorTotal ? 'text-colgate-red' : ''}">${formatFraction(row.tAch)}</td>
                    <td class="px-3 py-4 bg-colgate-navy-light text-center"><span class="${row.tPct < 20 ? 'text-red-600' : 'text-slate-600'} font-medium">${row.tPct}%</span></td>
                    
                    <td class="px-3 py-4 text-center border-l-4 border-slate-100 bg-colgate-beige-light text-slate-700 ${isMajorTotal ? 'text-colgate-red' : ''}">${formatNum(row.eTgt)}</td>
                    <td class="px-3 py-4 text-center bg-colgate-beige-light text-slate-900 ${isMajorTotal ? 'text-colgate-red' : ''}">${formatNum(row.eAch)}</td>
                    <td class="px-3 py-4 bg-colgate-beige-light text-center"><span class="${getProgressColor(row.ePct)}">${row.ePct}%</span></td>
                `;
                tableBody.appendChild(tr);
            });
        }

        // Initialize
        toggleView('GT');
        searchInput.addEventListener('input', filterAndRender);

        // Populate Total Achievements Stats
        const totalRow = rawData.find(row => row.area === 'TOTAL');
        if (totalRow) {
            document.getElementById('totalPriTgt').textContent = formatFraction(totalRow.pTgt);
            document.getElementById('totalPriAch').textContent = formatFraction(totalRow.pAch);
            
            document.getElementById('totalSttTgt').textContent = formatFraction(totalRow.sTgt);
            document.getElementById('totalSttAch').textContent = formatFraction(totalRow.sAch);
            
            document.getElementById('totalTbrTgt').textContent = formatFraction(totalRow.tTgt);
            document.getElementById('totalTbrAch').textContent = formatFraction(totalRow.tAch);
            
            document.getElementById('totalErcTgt').textContent = formatNum(totalRow.eTgt);
            document.getElementById('totalErcAch').textContent = formatNum(totalRow.eAch);
        }

    </script>
</body>
</html>
